# Configuração Nginx para noemisantos.italoferreira.dev.br
# Site de casamento - HTML estático (HTTP apenas)

server {
    listen 80;
    server_name noemisantos.italoferreira.dev.br;
    
    # Diretório raiz do site
    root /srv/casamento;
    index index.html;
    
    # Headers de segurança (básicos para HTTP)
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;
    
    # Configurações de cache para assets estáticos
    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
        add_header Vary Accept-Encoding;
        
        # Compressão gzip
        gzip on;
        gzip_vary on;
        gzip_min_length 1024;
        gzip_proxied any;
        gzip_comp_level 6;
        gzip_types
            text/plain
            text/css
            text/xml
            text/javascript
            application/json
            application/javascript
            application/xml+rss
            application/atom+xml
            image/svg+xml;
    }
    
    # Configuração para vídeos
    location ~* \.(mov|mp4|webm)$ {
        expires 1M;
        add_header Cache-Control "public";
        add_header Accept-Ranges bytes;
        add_header Content-Type video/mp4;
    }
    
    # Página principal
    location / {
        try_files $uri $uri/ =404;
        
        # Compressão para HTML
        gzip on;
        gzip_vary on;
        gzip_min_length 1024;
        gzip_comp_level 6;
        gzip_types text/plain text/css application/javascript;
    }
    
    # Páginas específicas (caso queira URLs amigáveis)
    location = /local {
        try_files /local.html =404;
    }
    
    location = /sobre-nos {
        try_files /sobre-nos.html =404;
    }
    
    location = /presentes {
        try_files /presentes.html =404;
    }
    
    location = /obrigado {
        try_files /obrigado.html =404;
    }
    
    # Bloquear acesso a arquivos sensíveis
    location ~ /\. {
        deny all;
    }
    
    location ~ ~$ {
        deny all;
    }
    
    # Logs
    access_log /var/log/nginx/noemi-casamento.access.log;
    error_log /var/log/nginx/noemi-casamento.error.log;
}
